<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <title>Loyalty Card Designer</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link rel="stylesheet" href="css/style.css">
</head>

<body>
  <header>
    <h1>Loyalty Card Designer</h1>
    <div class="muted">3.5" × 2.0" · crop marks · undo/redo</div>
  </header>

  <div id="app">
    <div id="panel">
      <label>Load template JSON <input id="loadTemplate" type="file" accept=".json" /></label>
      <div class="btnRow" style="margin-top:8px">
        <button id="saveTemplate">Save Template</button>
        <button id="resetTemplate" class="btnSub">Reset</button>
      </div>

      <label>Load CSV (Name,Phone) <input id="loadCSV" type="file" accept=".csv,.txt" /></label>
      <label>Logo image <input id="logoFile" type="file" accept="image/*" /></label>

      <div class="group">
        <div class="btnRow">
          <button id="addText">Add Text</button>
          <button id="addBarcode">Add Barcode / QR</button>
        </div>
        <div class="muted small" style="margin-top:6px">Click to select. Drag to move. Corner squares resize; top circle
          rotates.</div>
      </div>

      <div class="group">
        <label>Inspector (selected)</label>
        <div id="inspector" class="small muted">No element selected</div>
        <div style="margin-top:8px" class="dpad">
          <div></div><button id="nudgeUp">↑</button>
          <div></div>
          <button id="nudgeLeft">←</button>
          <div></div><button id="nudgeRight">→</button>
          <div></div><button id="nudgeDown">↓</button>
          <div></div>
        </div>
        <div class="btnRow" style="margin-top:8px">
          <button id="rotMinus" class="btnSub">Rotate -5°</button>
          <button id="rotPlus" class="btnSub">Rotate +5°</button>
        </div>
        <div class="btnRow" style="margin-top:8px">
          <button id="deleteEl" class="btnWarn">Delete</button>
          <button id="linkToggle" class="btnSub" title="Link/Unlink barcode text" style="display:none">Toggle
            Link</button>
        </div>
      </div>

      <div class="group">
        <label>Background / Style</label>

        <select id="patternType">
          <option value="none">None</option>
          <option value="solid">Solid color</option>
          <option value="gradient">Gradient</option>
          <option value="stripes">Stripes</option>
          <option value="dots">Dots</option>
        </select>

        <label id="color1Row">Color 1
          <input id="color1" type="color" value="#ffffff" />
        </label>

        <label id="color2Row">Color 2
          <input id="color2" type="color" value="#e2e8f0" />
        </label>

        <label style="margin-top:8px">
          <input id="borderOn" type="checkbox" /> Show card border
        </label>
        <label>Border color <input id="borderColor" type="color" value="#000000" /></label>
        <label>Border thickness <input id="borderThickness" type="number" value="2" min="0" max="12" /></label>
        <label style="margin-top:8px">Drop shadow <input id="dropShadow" type="checkbox" /></label>
        <label>Corner radius <input id="cornerRadius" type="number" value="6" min="0" max="100" /></label>
      </div>

      <div class="group">
        <label>Editor</label>

        <div style="display:flex;gap:8px;margin-top:8px">
          <label style="flex:1">Grid size (px)
            <input id="gridSize" type="number" value="20" />
          </label>
        </div>

        <div style="display:flex;gap:12px;align-items:center;margin-top:8px">
          <label style="margin:0">
            <input id="showGrid" type="checkbox" checked /> Show grid & center lines
          </label>
          <label style="margin:0">
            <input id="snapToGrid" type="checkbox" /> Snap to grid
          </label>
        </div>

        <div class="btnRow" style="margin-top:8px">
          <button id="undoBtn" class="btnSub" title="Ctrl+Z">Undo</button>
          <button id="redoBtn" class="btnSub" title="Ctrl+Y">Redo</button>
        </div>
      </div>

      <div class="btnRow" style="margin-top:12px"><button id="exportPDF">Export PDF</button></div>
      <div style="margin-top:12px" class="muted small">All layout, styles, grid, snap, etc. are saved in the template JSON.</div>
    </div>

    <div id="canvasWrap">
      <canvas id="cardCanvas" width="1050" height="600" tabindex="0"></canvas>
    </div>
  </div>

  <!-- CDNs (MIT-licensed libs; see THIRD_PARTY_LICENSES.txt) -->
  <script src="https://cdn.jsdelivr.net/npm/jsbarcode@3.11.6/dist/JsBarcode.all.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/qrcode/build/qrcode.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

  <script src="js/app.js" defer></script>
</body>

</html>